<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Globaler Warenstrom ‚Äì Globus</title>
  <style>
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:rgba(236,255,246,.92);
      background:
        radial-gradient(900px 700px at 15% 10%, rgba(34,179,86,.20), transparent 60%),
        radial-gradient(800px 600px at 85% 0%, rgba(70,247,197,.14), transparent 62%),
        linear-gradient(180deg, #051a13, #062018 55%, #041611);
    }
    .wrap{max-width:1100px;margin:0 auto;padding:28px 18px}
    .card{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.14);border-radius:18px;box-shadow:0 18px 55px rgba(0,0,0,.18);padding:22px;backdrop-filter: blur(10px)}
    h1{margin:6px 0 8px;font-size:52px;line-height:1.02}
    p{margin:0 0 16px;color:rgba(236,255,246,.82)}
    .globeBox{border-radius:18px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);padding:16px;backdrop-filter: blur(10px)}
    .globeBox{position:relative;}
    canvas{width:100%;height:520px;display:block;border-radius:14px;background:rgba(255,255,255,.04)}
    .bar{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin-top:10px}
    .pill{display:inline-flex;gap:8px;align-items:center;padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.08);font-size:13px;color:rgba(236,255,246,.90)}
    select{border:0;background:transparent;font-size:13px;outline:none;color:rgba(236,255,246,.92)}
    #pinTooltip,#globeTooltip{position:fixed;display:none;z-index:20;max-width:260px;padding:10px 12px;border-radius:12px;background:rgba(20,32,26,.92);color:#fff;border:1px solid rgba(255,255,255,.18);box-shadow:0 18px 50px rgba(0,0,0,.25)}

    /* Loader overlay */
    .globeLoader{position:absolute;inset:16px;display:flex;align-items:center;justify-content:center;border-radius:14px;background:radial-gradient(900px 420px at 20% 0%, rgba(34,179,86,.22), rgba(255,255,255,.55) 62%), linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.45));backdrop-filter: blur(8px);border:1px solid rgba(0,0,0,.08);z-index:5}
    .globeLoader__card{width:min(520px, 92%);padding:18px 18px 16px;border-radius:16px;border:1px solid rgba(0,0,0,.10);background:rgba(255,255,255,.70);box-shadow:0 26px 70px rgba(0,0,0,.12)}
    .globeLoader__title{font-weight:800;font-size:18px;color:#1e2b24;margin-bottom:10px;display:flex;align-items:center;gap:10px}
    .globeLoader__orb{width:12px;height:12px;border-radius:999px;background:#22b356;box-shadow:0 0 0 6px rgba(34,179,86,.15);animation:pulse 1.1s ease-in-out infinite}
    @keyframes pulse{0%,100%{transform:scale(1);opacity:1}50%{transform:scale(1.25);opacity:.65}}
    .globeLoader__bar{height:10px;border-radius:999px;background:rgba(0,0,0,.08);overflow:hidden}
    .globeLoader__fill{height:100%;width:0%;border-radius:999px;background:linear-gradient(90deg,#22b356,#46f7c5);transition:width .22s ease}
    .globeLoader__meta{margin-top:10px;display:flex;justify-content:space-between;align-items:center;font-size:12px;color:rgba(0,0,0,.65)}
    .globeLoader.is-done{opacity:0;pointer-events:none;transform:translateY(2px);transition:opacity .25s ease,transform .25s ease}
    a{color:rgba(70,247,197,.95)}
    .globeLoader{position:absolute;inset:16px;display:flex;align-items:center;justify-content:center;z-index:5;border-radius:14px;
      background: radial-gradient(700px 320px at 50% 20%, rgba(70,247,197,.14), rgba(255,255,255,.10) 55%, rgba(255,255,255,.06) 100%);
      backdrop-filter: blur(12px);
      border:1px solid rgba(255,255,255,.14);
    }
    .globeLoader.is-hidden{opacity:0;pointer-events:none;transition: opacity 320ms ease;}
    .globeLoader__card{width:min(440px, 92%);border-radius:18px;border:1px solid rgba(255,255,255,.16);background: rgba(8,20,14,.55);box-shadow: 0 20px 60px rgba(0,0,0,.28);padding:16px 16px 14px;}
    .globeLoader__title{font-weight:900;letter-spacing:-.02em;margin-bottom:10px}
    .globeLoader__bar{height:12px;border-radius:999px;background:rgba(255,255,255,.10);overflow:hidden;}
    .globeLoader__fill{height:100%;width:0%;border-radius:999px;background: linear-gradient(90deg, rgba(34,179,86,.95), rgba(70,247,197,.95));box-shadow: 0 8px 20px rgba(70,247,197,.35);transition: width 180ms ease;}
    .globeLoader__meta{display:flex;justify-content:space-between;gap:12px;margin-top:10px;font-size:12px;opacity:.85;color:rgba(236,255,246,.85)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div style="margin-bottom:10px"><a href="./index.html">‚Üê Start</a> / <b>Globus</b></div>
      <h1>Globaler Warenstrom</h1>
      <p>Interaktiver 3D‚ÄëGlobus mit typischen Herkunftsregionen von Supermarkt‚ÄëProdukten. Tipp: Du kannst ein Produkt direkt fokussieren mit <code>?id=f03</code> (z.‚ÄØB. Banane).</p>

      <div class="globeBox">
        <!-- Loader overlay: hides white blank while textures/pins initialize -->
        <div class="globeLoader" id="globeLoader" aria-hidden="true">
          <div class="globeLoader__card">
            <div class="globeLoader__title">Globus l√§dt‚Ä¶</div>
            <div class="globeLoader__bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
              <div class="globeLoader__fill" id="globeLoaderFill"></div>
            </div>
            <div class="globeLoader__meta">
              <span id="globeLoaderText">Initialisiere‚Ä¶</span>
              <span id="globeLoaderPct">0%</span>
            </div>
          </div>
        </div>
        <canvas id="globeCanvas" aria-label="3D Globus"></canvas>

        <div class="bar">
          <span class="pill" id="globeStatus">Status: l√§dt‚Ä¶</span>
          <span class="pill">üñ±Ô∏è drag = drehen</span>
          <span class="pill">üîé scroll = zoomen</span>

          <span class="pill">
            Filter:&nbsp;
            <select id="productSelect">
              <option value="all">Alle Produkte</option>
            </select>
          </span>
        </div>
      </div>
    </div>
  </div>

  <div id="pinTooltip"></div>

  <!-- three.js + OrbitControls -->
  <script src="https://unpkg.com/three@0.152.2/build/three.min.js"></script>
  <script src="https://unpkg.com/three@0.152.2/examples/js/controls/OrbitControls.js"></script>

  <!-- optional store (wenn vorhanden) -->
  <script src="./store.js"></script>

  <!-- globe -->
  <script src="./globe.js"></script>
</body>
</html>
